@using Notlarim102.WebApp.Models
@using Notlarim102.Entity
@model List<Notlarim102.Entity.Comment>


@{
    NotlarimUser user = CurrentSession.User;
}

@foreach (Comment item in Model)
{
<div class="d-flex border border-danger mb-1">
    <div class="flex-shrink-0 mt-3">
        @*<img src="..." alt="...">*@
        <div class="bi bi-chat-left-dots-fill text-danger ms-3"></div>
    </div>
    <div class="flex-grow-1 row ms-1">
        <span class="col-md-11 fs-6" id="comment_text_@item.Id" contenteditable="false">
            @item.Text
        </span>
        @if (user != null && user.Id == item.OwnerId)
        {
            <span class="col-md-3">
                <button type="button" class="btn btn-warning btn-sm mt-2" data-edit-mode="false" onclick="doComment(this,'edit_clicked',@item.Id,'#comment_text_@item.Id')">
                    <span class="bi bi-pencil"></span>
                </button>
                <button type="button" class="btn btn-danger btn-sm mt-2" onclick="doComment(this,'delete_clicked',@item.Id)">
                    <span class="bi bi-trash"></span>
                </button>
            </span>
        }

        <small class="col-md-12">
            <span class="bi bi-clock"></span>@item.ModifiedOn &nbsp;&nbsp;&nbsp;&nbsp;
            <span class="bi bi-person"></span>@item.Owner.Username
        </small>
    </div>
</div>
}